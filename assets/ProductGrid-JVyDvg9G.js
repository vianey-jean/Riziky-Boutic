import{j as e,B as l,L as S,a0 as C}from"./index-Dc-BS1W2.js";import{r as i}from"./emoji-mart-DRerY-OB.js";import{P as F}from"./ProductCard-Cq7PI4fG.js";import{S as L,j as z,k as A,n as $,o as E,m as n}from"./Layout-TSHxcvNT.js";import{L as O,i as V,F as T}from"./pubLayoutAPI-DfYluJku.js";const H=({products:t,title:d,description:c,showFilters:b=!1,isLoading:m=!1,showViewAllButton:v=!1})=>{const[r,x]=i.useState("grid"),[p,N]=i.useState(!1),[o,h]=i.useState([]),[k,g]=i.useState(1),u=12;i.useEffect(()=>{g(1),h(t.slice(0,u))},[t]);const w=()=>{const s=k+1,a=t.slice(0,s*u);h(a),g(s)},y=o.length<t.length,j={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},f={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("section",{className:"product-section",children:[(d||c)&&e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[d&&e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-red-800 dark:text-neutral-100 mb-3",children:d}),c&&e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 text-center max-w-2xl",children:c})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-neutral-100 dark:bg-neutral-800 rounded-lg p-1",children:[e.jsx(l,{type:"button",variant:"ghost",size:"sm",className:`rounded-md ${r==="grid"?"bg-white dark:bg-neutral-900 shadow-sm":""}`,onClick:()=>x("grid"),"aria-label":"Affichage en grille",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",className:`rounded-md ${r==="list"?"bg-white dark:bg-neutral-900 shadow-sm":""}`,onClick:()=>x("list"),"aria-label":"Affichage en liste",children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[t.length," produit",t.length>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[v&&e.jsx(S,{to:C("/tous-les-produits"),children:e.jsx(l,{variant:"outline",size:"sm",className:"text-sm text-red-800",children:"Voir tous produits"})}),b&&e.jsxs(L,{open:p,onOpenChange:N,children:[e.jsx(z,{asChild:!0,children:e.jsxs(l,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Filtres"]})}),e.jsxs(A,{children:[e.jsx($,{children:e.jsx(E,{children:"Filtres"})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{children:"Options de filtrage à implémenter"})})]})]})]})]}),m?e.jsx("div",{className:r==="grid"?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6":"flex flex-col gap-4",children:[...Array(8)].map((s,a)=>e.jsxs("div",{className:`${r==="list"?"border rounded-lg p-4":""} animate-pulse`,children:[e.jsx("div",{className:"bg-neutral-200 dark:bg-neutral-800 w-full h-52 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-800 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-800 rounded w-1/2"})]},a))}):e.jsxs(e.Fragment,{children:[r==="grid"?e.jsx(n.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",role:"list","aria-label":"Liste de produits",variants:j,initial:"hidden",animate:"show",children:o.map(s=>e.jsx(n.div,{role:"listitem",variants:f,children:e.jsx(F,{product:s})},s.id))}):e.jsx(n.div,{className:"flex flex-col gap-4",role:"list","aria-label":"Liste de produits",variants:j,initial:"hidden",animate:"show",children:o.map(s=>e.jsx(n.div,{role:"listitem",className:"border border-neutral-200 dark:border-neutral-800 rounded-lg hover:border-neutral-300 dark:hover:border-neutral-700 hover:shadow-md transition-all",variants:f,children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/4 p-4",children:e.jsx("img",{src:s.image?`https://riziky-boutic-server.onrender.com${s.image}`:"/placeholder.svg",alt:s.name,className:"w-full h-48 object-contain",onError:a=>{const P=a.target;P.src="/placeholder.svg"}})}),e.jsxs("div",{className:"md:w-3/4 p-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:s.name}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex justify-between items-end",children:[s.promotion?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-neutral-500 line-through",children:[typeof s.originalPrice=="number"?s.originalPrice.toFixed(2):s.price.toFixed(2)," ","€"]}),e.jsxs("p",{className:"font-bold text-red-600 text-lg",children:[s.price.toFixed(2)," €"]})]}):e.jsxs("p",{className:"font-bold text-lg",children:[s.price.toFixed(2)," €"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>{const{toggleFavorite:a}=require("@/contexts/StoreContext").useStore();a(s)},children:"Favoris"}),e.jsx(l,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>{const{addToCart:a}=require("@/contexts/StoreContext").useStore();a(s)},disabled:!s.isSold||s.stock!==void 0&&s.stock<=0,children:"Ajouter au panier"})]})]})]})]})},s.id))}),y&&e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(l,{onClick:w,variant:"outline",className:"px-8",children:"Afficher plus de produits"})})]}),!m&&t.length===0&&e.jsx("div",{className:"text-center py-16 bg-neutral-50 dark:bg-neutral-900 rounded-xl",children:e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Aucun produit trouvé"})})]})};export{H as P};
