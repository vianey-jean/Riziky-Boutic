import{e as S,j as e,X as y,L as x}from"./index-Dc-BS1W2.js";import{r as a}from"./emoji-mart-DRerY-OB.js";import{T as P,A as T,t as E}from"./pubLayoutAPI-DfYluJku.js";import{e as L,m as V}from"./Layout-TSHxcvNT.js";import{Z as A,b as C}from"./index-DrCm3EO8.js";import"./arrow-up-BRrXiPPU.js";import"./database-BKbjrLJf.js";import"./select-B3i9CjeT.js";import"./index-BkNWx6m2.js";import"./index-CE35kS-Q.js";import"./index-C_ZzNLza.js";import"./Combination-DuTqoeZY.js";import"./index-DqWbzM0E.js";import"./user-DUzEMHwr.js";import"./circle-plus-gGTkOUJD.js";import"./clock-U9VSJiyP.js";import"./play-C68uu85c.js";import"./house-Qr62Kw0A.js";import"./shield-x-BsKCYJAg.js";import"./video-CY1c3mCS.js";import"./plus-DTTTuzsk.js";import"./search-DlKIh_Ll.js";import"./square-pen-D72gPhkm.js";import"./trash-2-DHce8VXy.js";import"./triangle-alert-Btc8UJ8c.js";import"./badge-taJbTjbb.js";import"./popover-CGZmNc4e.js";import"./index-DE01g13U.js";import"./index--K3sZeIh.js";import"./index-FHuIi1st.js";import"./categoriesAPI-DvU_otkD.js";import"./scroll-area-BfHT7kH_.js";import"./useMutation-CApHjpg4.js";const pe=({products:l,dismissKey:m="trending-products-dismissed"})=>{const h=S(),[g,f]=a.useState(()=>localStorage.getItem(m)==="true"),[i,s]=a.useState({id:"featured",title:"Produits populaires",icon:P,linkText:"Voir plus de produits",linkPath:"/populaires"}),o=[{id:"promotional",title:"Offres promotionnelles",icon:A,linkText:"Voir toutes les promotions",linkPath:"/promotions"},{id:"new-arrivals",title:"Dernières nouveautés",icon:E,linkText:"Voir toutes les nouveautés",linkPath:"/nouveautes"},{id:"complete-catalog",title:"Tous les produits",icon:C,linkText:"Voir tous les produits",linkPath:"/tous-les-produits"}];a.useEffect(()=>{const t=()=>{const j=document.querySelector('[data-section="promotional"]'),k=document.querySelector('[data-section="new-arrivals"]'),N=document.querySelector('[data-section="complete-catalog"]'),n=d=>{if(!d)return!1;const p=d.getBoundingClientRect(),b=window.innerHeight,u=p.top+p.height/2;return u>=0&&u<=b};n(j)?s(o[0]):n(k)?s(o[1]):n(N)&&s(o[2])};t();let r=!1;const c=()=>{r||(requestAnimationFrame(()=>{t(),r=!1}),r=!0)};return window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",t,{passive:!0}),()=>{window.removeEventListener("scroll",c),window.removeEventListener("resize",t)}},[]);const v=()=>{localStorage.setItem(m,"true"),f(!0)};if(h.pathname!=="/"||l.length===0||g)return null;const w=i.icon;return e.jsx(L,{children:e.jsx(V.div,{className:"fixed bottom-4 right-4 z-50 max-w-sm bg-white dark:bg-neutral-900 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-800 overflow-hidden",initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3},children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[e.jsx(w,{className:"h-5 w-5 mr-2"}),e.jsx("h3",{className:"font-semibold",children:i.title})]}),e.jsx("button",{onClick:v,className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors","aria-label":"Fermer",children:e.jsx(y,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"space-y-3",children:l.slice(0,3).map(t=>e.jsxs(x,{to:`/produit/${t.id}`,className:"flex items-center p-2 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-lg transition-colors",children:[e.jsx("img",{src:`https://riziky-boutic-server.onrender.com${t.image||t.images&&t.images[0]}`,alt:t.name,className:"w-10 h-10 object-cover rounded-md",onError:r=>{r.target.src="/placeholder.svg"}}),e.jsxs("div",{className:"ml-3 text-left",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-1",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.promotion&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded",children:["-",t.promotion,"%"]}),e.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[t.price.toFixed(2)," €"]})]})]})]},t.id))}),e.jsx("div",{className:"mt-3 text-center",children:e.jsxs(x,{to:i.linkPath,className:"inline-flex items-center text-sm text-red-600 dark:text-red-400 hover:underline",children:[i.linkText,e.jsx(T,{className:"h-4 w-4 ml-1"})]})})]})},i.id)})};export{pe as default};
