import{_ as p,j as e,C as a,k as i,l as n,c as l,Y as m,Z as o}from"./index-Dc-BS1W2.js";import{r as f}from"./emoji-mart-DRerY-OB.js";import{A as g}from"./AdminLayout-CibHDjhS.js";import{a as N,u as v}from"./useMutation-CApHjpg4.js";import{S as y}from"./scroll-area-BfHT7kH_.js";import{S as b}from"./separator-6a6jIHNF.js";import{f as C}from"./formatDistanceToNow-ysryFQKv.js";import{f as S}from"./fr-Bao31GFJ.js";import"./index-DrCm3EO8.js";import"./index-DE01g13U.js";import"./index-BkNWx6m2.js";const T=()=>{const c=p(),[t,x]=f.useState(null),{data:r=[]}=N({queryKey:["contacts"],queryFn:async()=>(await o.get("/contacts")).data}),d=v({mutationFn:async({id:s,read:j})=>o.put(`/contacts/${s}`,{read:j}),onSuccess:()=>{c.invalidateQueries({queryKey:["contacts"]})}}),u=s=>{x(s),s.read||d.mutate({id:s.id,read:!0})},h=s=>C(new Date(s),{addSuffix:!0,locale:S});return e.jsxs(g,{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Messages des clients"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(a,{className:"md:col-span-1",children:[e.jsx(i,{children:e.jsx(n,{className:"text-lg",children:"Liste des messages"})}),e.jsx(l,{className:"p-0",children:e.jsx(y,{className:"h-[70vh]",children:r.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Aucun message"}):e.jsx("div",{children:r.map(s=>e.jsxs("div",{children:[e.jsxs("button",{className:m("w-full text-left p-4 hover:bg-gray-100 transition-colors",(t==null?void 0:t.id)===s.id&&"bg-gray-100",!s.read&&"border-l-4 border-red-800"),onClick:()=>u(s),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:m("font-medium",!s.read&&"font-bold text-red-800"),children:s.objet}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.prenom," ",s.nom]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:h(s.dateCreation)})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:s.message})]}),e.jsx(b,{})]},s.id))})})})]}),e.jsxs(a,{className:"md:col-span-2",children:[e.jsx(i,{children:e.jsx(n,{className:"text-lg",children:"Détails du message"})}),e.jsx(l,{children:t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Expéditeur"}),e.jsxs("p",{children:[t.prenom," ",t.nom]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("p",{children:new Date(t.dateCreation).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{children:t.email})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),e.jsx("p",{children:t.telephone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Adresse"}),e.jsx("p",{children:t.adresse})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Objet"}),e.jsx("p",{className:"font-medium",children:t.objet})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Message"}),e.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-md whitespace-pre-wrap",children:t.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"text-sm text-red-800 hover:underline",onClick:()=>d.mutate({id:t.id,read:!t.read}),children:["Marquer comme ",t.read?"non lu":"lu"]})})]}):e.jsx("div",{className:"text-center text-muted-foreground py-12",children:"Sélectionnez un message pour voir les détails"})})]})]})]})};export{T as default};
