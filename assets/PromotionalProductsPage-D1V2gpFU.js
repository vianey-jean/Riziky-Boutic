import{j as e,B as c,p as T,J as D}from"./index-Dc-BS1W2.js";import{r as o}from"./emoji-mart-DRerY-OB.js";import{L as H}from"./Layout-TSHxcvNT.js";import{P as J}from"./ProductGrid-JVyDvg9G.js";import{u as z,H as G,P as M,F as U,D as _}from"./useProductFilters-DBbhcKgy.js";import{T as q,d as K}from"./pubLayoutAPI-DfYluJku.js";import{C as Q}from"./user-DUzEMHwr.js";import{S as V}from"./index-DrCm3EO8.js";import"./badge-taJbTjbb.js";import"./popover-CGZmNc4e.js";import"./Combination-DuTqoeZY.js";import"./index-CE35kS-Q.js";import"./index-C_ZzNLza.js";import"./index-BkNWx6m2.js";import"./index-DE01g13U.js";import"./index--K3sZeIh.js";import"./index-FHuIi1st.js";import"./select-B3i9CjeT.js";import"./index-DqWbzM0E.js";import"./categoriesAPI-DvU_otkD.js";import"./search-DlKIh_Ll.js";import"./clock-U9VSJiyP.js";import"./database-BKbjrLJf.js";import"./scroll-area-BfHT7kH_.js";import"./useMutation-CApHjpg4.js";import"./arrow-up-BRrXiPPU.js";import"./ProductCard-Cq7PI4fG.js";import"./dialog-D1sIsNKu.js";import"./circle-plus-gGTkOUJD.js";import"./play-C68uu85c.js";import"./house-Qr62Kw0A.js";import"./shield-x-BsKCYJAg.js";import"./video-CY1c3mCS.js";import"./plus-DTTTuzsk.js";import"./square-pen-D72gPhkm.js";import"./trash-2-DHce8VXy.js";import"./triangle-alert-Btc8UJ8c.js";const Ie=()=>{const[S,l]=o.useState([]),[k,d]=o.useState(!0),[F,O]=o.useState(!1),[t,m]=o.useState(1),a=16,{searchTerm:p,setSearchTerm:u,priceRange:g,setPriceRange:x,maxPrice:h,sortOption:C,setSortOption:A,sortedProducts:s,showInStock:f,setShowInStock:j,showOutOfStock:P,setShowOutOfStock:v,showPromoOnly:b,setShowPromoOnly:N,activeFilters:E,resetFilters:i,getFilterBadges:I}=z({products:S,promotionFilter:!0});o.useEffect(()=>{(async()=>{d(!0);try{const r=await T.getAll();if(!r.data||!Array.isArray(r.data))throw new Error("Format de données incorrect");l(r.data)}catch(r){console.error("Erreur lors du chargement des produits en promotion:",r),D.error("Impossible de charger les produits en promotion"),l([])}finally{d(!1)}})()},[]);const n=Math.ceil(s.length/a),y=(t-1)*a,B=y+a,w=s.slice(y,B),L={filtersOpen:F,setFiltersOpen:O,activeFilters:E,searchTerm:p,setSearchTerm:u,priceRange:g,setPriceRange:x,maxPrice:h,showInStock:f,setShowInStock:j,showOutOfStock:P,setShowOutOfStock:v,showPromoOnly:b,setShowPromoOnly:N,resetFilters:i};return e.jsx(H,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 via-white to-neutral-50 dark:from-neutral-950 dark:via-neutral-900 dark:to-neutral-950",children:[e.jsx(G,{title:"Promotions Exceptionnelles",description:"Profitez de nos offres spéciales sur une sélection de produits de beauté capillaire. Des prix réduits pour vous permettre de découvrir nos meilleures références.",icon:q}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(M,{title:"Tous nos produits en promotion",productCount:s.length,sortOption:C,setSortOption:A,mobileFiltersProps:L}),e.jsx(U,{badges:I(),onClearAll:i}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsx(_,{searchTerm:p,setSearchTerm:u,priceRange:g,setPriceRange:x,maxPrice:h,showInStock:f,setShowInStock:j,showOutOfStock:P,setShowOutOfStock:v,showPromoOnly:b,setShowPromoOnly:N,resetFilters:i}),e.jsx("div",{className:"md:col-span-3",children:k?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(16)].map((R,r)=>e.jsxs("div",{className:"border rounded-xl p-4 h-[300px] animate-pulse",children:[e.jsx("div",{className:"w-full h-40 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},r))}):w.length>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{products:w}),n>1&&e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",t," sur ",n," - ",s.length," produit",s.length>1?"s":""," au total"]}),e.jsxs("div",{className:"flex gap-2",children:[t>1&&e.jsxs(c,{variant:"outline",onClick:()=>m(t-1),className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Précédent"]}),t<n&&e.jsxs(c,{onClick:()=>m(t+1),className:"flex items-center gap-2",children:["Suivant",e.jsx(Q,{className:"h-4 w-4"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 bg-neutral-50 dark:bg-neutral-900 rounded-xl text-center",children:[e.jsx(V,{className:"h-14 w-14 text-neutral-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit en promotion trouvé"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Nous n'avons trouvé aucun produit en promotion correspondant à vos critères de recherche."}),e.jsx(c,{onClick:i,children:"Réinitialiser tous les filtres"})]})})]})]})]})})};export{Ie as default};
