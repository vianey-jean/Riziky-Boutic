import{a3 as c,j as e,C as f,k as C,l as N,c as k,G as t,I as i,B as p,M as W,T as X,J as n}from"./index-Dc-BS1W2.js";import{r as S}from"./emoji-mart-DRerY-OB.js";import{S as o}from"./switch-CHW0mfJ1.js";import{T as ee}from"./textarea-C2Rhkt_I.js";import{S as M,a as E,b as B,c as L,d as g}from"./select-B3i9CjeT.js";import{T as se,a as ae,b,c as P}from"./tabs-B2Ic9XCE.js";import{A as te}from"./AdminLayout-CibHDjhS.js";import{d as D,T as ie}from"./index-DrCm3EO8.js";import{C as re,D as ne,B as le}from"./database-BKbjrLJf.js";import"./Combination-DuTqoeZY.js";import"./index-DqWbzM0E.js";import"./index-C_ZzNLza.js";import"./index-BkNWx6m2.js";import"./index-CE35kS-Q.js";import"./index--K3sZeIh.js";import"./index-DE01g13U.js";const l={getGeneralSettings:()=>fetch("https://riziky-boutic-server.onrender.com/api/public-settings/general").then(a=>{if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>({data:a})),updateGeneralSettings:a=>c.put("/settings/general",a),getSMTPSettings:()=>c.get("/settings/smtp"),updateSMTPSettings:a=>c.put("/settings/smtp",a),testSMTPConnection:a=>c.post("/settings/smtp/test",a),getPaymentSettings:()=>c.get("/settings/payment"),updatePaymentSettings:a=>c.put("/settings/payment",a),getShippingSettings:()=>c.get("/settings/shipping"),updateShippingSettings:a=>c.put("/settings/shipping",a),getSecuritySettings:()=>c.get("/settings/security"),updateSecuritySettings:a=>c.put("/settings/security",a),getBackupSettings:()=>c.get("/settings/backup"),updateBackupSettings:a=>c.put("/settings/backup",a),configureAutoBackup:a=>c.post("/settings/backup/configure",a),triggerManualBackup:()=>c.post("/settings/backup/manual"),getNotificationSettings:()=>c.get("/settings/notifications"),updateNotificationSettings:a=>c.put("/settings/notifications",a)},ke=()=>{const[a,x]=S.useState({siteName:"",siteDescription:"",siteUrl:"",maintenanceMode:!1,allowRegistration:!0,defaultCurrency:"EUR",defaultLanguage:"fr",timezone:"Europe/Paris"}),[d,y]=S.useState({host:"",port:587,username:"",password:"",fromEmail:"",fromName:"",encryption:"TLS"}),[r,j]=S.useState({stripePublishableKey:"",stripeSecretKey:"",paypalClientId:"",paypalClientSecret:"",enableStripe:!1,enablePaypal:!1,enableCashOnDelivery:!0}),[v,A]=S.useState({freeShippingThreshold:0,defaultShippingCost:0,shippingZones:[],enableFreeShipping:!1}),[h,w]=S.useState({enableTwoFactor:!1,sessionTimeout:3600,maxLoginAttempts:5,passwordMinLength:8,requirePasswordChange:!1}),[u,F]=S.useState({enableAutoBackup:!0,backupTime:"23:58",adminEmail:"vianey.jean@ymail.com",backupFrequency:"daily"}),[m,T]=S.useState({orderNotifications:!0,lowStockAlerts:!0,newUserNotifications:!0,systemAlerts:!0});S.useEffect(()=>{U()},[]);const U=async()=>{try{const[s,$,J,Y,_,Q,Z]=await Promise.all([l.getGeneralSettings(),l.getSMTPSettings(),l.getPaymentSettings(),l.getShippingSettings(),l.getSecuritySettings(),l.getBackupSettings(),l.getNotificationSettings()]);x(s.data||a),y($.data||d),j(J.data||r),A(Y.data||v),w(_.data||h),F(Q.data||u),T(Z.data||m)}catch(s){console.error("Erreur lors du chargement des paramètres:",s)}},I=async()=>{try{await l.updateGeneralSettings(a),n.success("Paramètres généraux sauvegardés")}catch{n.error("Erreur lors de la sauvegarde")}},q=async()=>{try{await l.updateSMTPSettings(d),n.success("Paramètres SMTP sauvegardés")}catch{n.error("Erreur lors de la sauvegarde SMTP")}},G=async()=>{try{await l.updatePaymentSettings(r),n.success("Paramètres de paiement sauvegardés")}catch{n.error("Erreur lors de la sauvegarde des paiements")}},K=async()=>{try{await l.updateShippingSettings(v),n.success("Paramètres de livraison sauvegardés")}catch{n.error("Erreur lors de la sauvegarde de la livraison")}},R=async()=>{try{await l.updateSecuritySettings(h),n.success("Paramètres de sécurité sauvegardés")}catch{n.error("Erreur lors de la sauvegarde de la sécurité")}},H=async()=>{try{await l.updateBackupSettings(u),await l.configureAutoBackup(u),n.success("Paramètres de sauvegarde configurés")}catch{n.error("Erreur lors de la configuration de la sauvegarde")}},z=async()=>{try{await l.updateNotificationSettings(m),n.success("Paramètres de notification sauvegardés")}catch{n.error("Erreur lors de la sauvegarde des notifications")}},O=async()=>{try{await l.testSMTPConnection(d),n.success("Connexion SMTP réussie")}catch{n.error("Échec de la connexion SMTP")}},V=async()=>{try{await l.triggerManualBackup(),n.success("Sauvegarde manuelle déclenchée")}catch{n.error("Erreur lors de la sauvegarde")}};return e.jsx(te,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Paramètres"}),e.jsx(D,{className:"h-6 w-6"})]}),e.jsxs(se,{defaultValue:"general",className:"w-full",children:[e.jsxs(ae,{className:"grid w-full grid-cols-7",children:[e.jsx(b,{value:"general",children:"Général"}),e.jsx(b,{value:"smtp",children:"SMTP"}),e.jsx(b,{value:"payment",children:"Paiement"}),e.jsx(b,{value:"shipping",children:"Livraison"}),e.jsx(b,{value:"security",children:"Sécurité"}),e.jsx(b,{value:"backup",children:"Sauvegarde"}),e.jsx(b,{value:"notifications",children:"Notifications"})]}),e.jsx(P,{value:"general",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Paramètres Généraux"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"siteName",children:"Nom du site"}),e.jsx(i,{id:"siteName",value:a.siteName||"",onChange:s=>x({...a,siteName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"siteUrl",children:"URL du site"}),e.jsx(i,{id:"siteUrl",value:a.siteUrl||"",onChange:s=>x({...a,siteUrl:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(t,{htmlFor:"siteDescription",children:"Description du site"}),e.jsx(ee,{id:"siteDescription",value:a.siteDescription||"",onChange:s=>x({...a,siteDescription:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"defaultCurrency",children:"Devise par défaut"}),e.jsxs(M,{value:a.defaultCurrency,onValueChange:s=>x({...a,defaultCurrency:s}),children:[e.jsx(E,{children:e.jsx(B,{})}),e.jsxs(L,{children:[e.jsx(g,{value:"EUR",children:"EUR (€)"}),e.jsx(g,{value:"USD",children:"USD ($)"}),e.jsx(g,{value:"GBP",children:"GBP (£)"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"timezone",children:"Fuseau horaire"}),e.jsxs(M,{value:a.timezone,onValueChange:s=>x({...a,timezone:s}),children:[e.jsx(E,{children:e.jsx(B,{})}),e.jsxs(L,{children:[e.jsx(g,{value:"Europe/Paris",children:"Europe/Paris"}),e.jsx(g,{value:"America/New_York",children:"America/New_York"}),e.jsx(g,{value:"Asia/Tokyo",children:"Asia/Tokyo"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"maintenanceMode",checked:a.maintenanceMode||!1,onCheckedChange:s=>x({...a,maintenanceMode:s})}),e.jsx(t,{htmlFor:"maintenanceMode",children:"Mode maintenance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"allowRegistration",checked:a.allowRegistration||!1,onCheckedChange:s=>x({...a,allowRegistration:s})}),e.jsx(t,{htmlFor:"allowRegistration",children:"Autoriser les inscriptions"})]}),e.jsx(p,{onClick:I,children:"Sauvegarder"})]})]})}),e.jsx(P,{value:"smtp",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Configuration SMTP"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"smtpHost",children:"Serveur SMTP"}),e.jsx(i,{id:"smtpHost",value:d.host,onChange:s=>y({...d,host:s.target.value}),placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"smtpPort",children:"Port"}),e.jsx(i,{id:"smtpPort",type:"number",value:d.port,onChange:s=>y({...d,port:parseInt(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"smtpUsername",children:"Nom d'utilisateur"}),e.jsx(i,{id:"smtpUsername",value:d.username,onChange:s=>y({...d,username:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"smtpPassword",children:"Mot de passe"}),e.jsx(i,{id:"smtpPassword",type:"password",value:d.password,onChange:s=>y({...d,password:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"fromEmail",children:"Email expéditeur"}),e.jsx(i,{id:"fromEmail",type:"email",value:d.fromEmail,onChange:s=>y({...d,fromEmail:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"fromName",children:"Nom expéditeur"}),e.jsx(i,{id:"fromName",value:d.fromName,onChange:s=>y({...d,fromName:s.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:q,children:"Sauvegarder"}),e.jsx(p,{variant:"outline",onClick:O,children:"Tester la connexion"})]})]})]})}),e.jsx(P,{value:"payment",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Paramètres de Paiement"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"enableStripe",checked:r.enableStripe,onCheckedChange:s=>j({...r,enableStripe:s})}),e.jsx(t,{htmlFor:"enableStripe",children:"Activer Stripe"})]}),r.enableStripe&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"stripePublishableKey",children:"Clé publique Stripe"}),e.jsx(i,{id:"stripePublishableKey",value:r.stripePublishableKey,onChange:s=>j({...r,stripePublishableKey:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"stripeSecretKey",children:"Clé secrète Stripe"}),e.jsx(i,{id:"stripeSecretKey",type:"password",value:r.stripeSecretKey,onChange:s=>j({...r,stripeSecretKey:s.target.value})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"enablePaypal",checked:r.enablePaypal,onCheckedChange:s=>j({...r,enablePaypal:s})}),e.jsx(t,{htmlFor:"enablePaypal",children:"Activer PayPal"})]}),r.enablePaypal&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"paypalClientId",children:"Client ID PayPal"}),e.jsx(i,{id:"paypalClientId",value:r.paypalClientId,onChange:s=>j({...r,paypalClientId:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"paypalClientSecret",children:"Client Secret PayPal"}),e.jsx(i,{id:"paypalClientSecret",type:"password",value:r.paypalClientSecret,onChange:s=>j({...r,paypalClientSecret:s.target.value})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"enableCashOnDelivery",checked:r.enableCashOnDelivery,onCheckedChange:s=>j({...r,enableCashOnDelivery:s})}),e.jsx(t,{htmlFor:"enableCashOnDelivery",children:"Paiement à la livraison"})]})]}),e.jsx(p,{onClick:G,children:"Sauvegarder"})]})]})}),e.jsx(P,{value:"shipping",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Paramètres de Livraison"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"defaultShippingCost",children:"Coût de livraison par défaut (€)"}),e.jsx(i,{id:"defaultShippingCost",type:"number",value:v.defaultShippingCost,onChange:s=>A({...v,defaultShippingCost:parseFloat(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"freeShippingThreshold",children:"Seuil livraison gratuite (€)"}),e.jsx(i,{id:"freeShippingThreshold",type:"number",value:v.freeShippingThreshold,onChange:s=>A({...v,freeShippingThreshold:parseFloat(s.target.value)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"enableFreeShipping",checked:v.enableFreeShipping,onCheckedChange:s=>A({...v,enableFreeShipping:s})}),e.jsx(t,{htmlFor:"enableFreeShipping",children:"Activer la livraison gratuite"})]}),e.jsx(p,{onClick:K,children:"Sauvegarder"})]})]})}),e.jsx(P,{value:"security",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Paramètres de Sécurité"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"sessionTimeout",children:"Délai d'expiration de session (secondes)"}),e.jsx(i,{id:"sessionTimeout",type:"number",value:h.sessionTimeout,onChange:s=>w({...h,sessionTimeout:parseInt(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"maxLoginAttempts",children:"Tentatives de connexion max"}),e.jsx(i,{id:"maxLoginAttempts",type:"number",value:h.maxLoginAttempts,onChange:s=>w({...h,maxLoginAttempts:parseInt(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"passwordMinLength",children:"Longueur minimale du mot de passe"}),e.jsx(i,{id:"passwordMinLength",type:"number",value:h.passwordMinLength,onChange:s=>w({...h,passwordMinLength:parseInt(s.target.value)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"enableTwoFactor",checked:h.enableTwoFactor,onCheckedChange:s=>w({...h,enableTwoFactor:s})}),e.jsx(t,{htmlFor:"enableTwoFactor",children:"Authentification à deux facteurs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"requirePasswordChange",checked:h.requirePasswordChange,onCheckedChange:s=>w({...h,requirePasswordChange:s})}),e.jsx(t,{htmlFor:"requirePasswordChange",children:"Forcer le changement de mot de passe"})]})]}),e.jsx(p,{onClick:R,children:"Sauvegarder"})]})]})}),e.jsx(P,{value:"backup",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Sauvegarde Automatique"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"backupTime",children:"Heure de sauvegarde"}),e.jsx(i,{id:"backupTime",type:"time",value:u.backupTime,onChange:s=>F({...u,backupTime:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"adminEmail",children:"Email administrateur"}),e.jsx(i,{id:"adminEmail",type:"email",value:u.adminEmail,onChange:s=>F({...u,adminEmail:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"backupFrequency",children:"Fréquence"}),e.jsxs(M,{value:u.backupFrequency,onValueChange:s=>F({...u,backupFrequency:s}),children:[e.jsx(E,{children:e.jsx(B,{})}),e.jsxs(L,{children:[e.jsx(g,{value:"daily",children:"Quotidienne"}),e.jsx(g,{value:"weekly",children:"Hebdomadaire"}),e.jsx(g,{value:"monthly",children:"Mensuelle"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"enableAutoBackup",checked:u.enableAutoBackup,onCheckedChange:s=>F({...u,enableAutoBackup:s})}),e.jsx(t,{htmlFor:"enableAutoBackup",children:"Activer la sauvegarde automatique"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:H,children:"Configurer"}),e.jsx(p,{variant:"outline",onClick:V,children:"Sauvegarde manuelle"})]})]})]})}),e.jsx(P,{value:"notifications",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Paramètres de Notification"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"orderNotifications",checked:m.orderNotifications,onCheckedChange:s=>T({...m,orderNotifications:s})}),e.jsx(t,{htmlFor:"orderNotifications",children:"Notifications de commandes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"lowStockAlerts",checked:m.lowStockAlerts,onCheckedChange:s=>T({...m,lowStockAlerts:s})}),e.jsx(t,{htmlFor:"lowStockAlerts",children:"Alertes de stock faible"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"newUserNotifications",checked:m.newUserNotifications,onCheckedChange:s=>T({...m,newUserNotifications:s})}),e.jsx(t,{htmlFor:"newUserNotifications",children:"Notifications nouveaux utilisateurs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"systemAlerts",checked:m.systemAlerts,onCheckedChange:s=>T({...m,systemAlerts:s})}),e.jsx(t,{htmlFor:"systemAlerts",children:"Alertes système"})]})]}),e.jsx(p,{onClick:z,children:"Sauvegarder"})]})]})})]})]})})};export{ke as default};
