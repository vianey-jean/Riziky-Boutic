import{H as w,j as e}from"./index-Dc-BS1W2.js";import{r as i}from"./emoji-mart-DRerY-OB.js";import{L as c,m}from"./Layout-TSHxcvNT.js";import{P as I}from"./ProductCard-Cq7PI4fG.js";import{f as D}from"./flashSaleAPI-BHvs0iCz.js";import{F as g}from"./play-C68uu85c.js";import{j as F}from"./pubLayoutAPI-DfYluJku.js";import{C as E}from"./clock-U9VSJiyP.js";import"./badge-taJbTjbb.js";import"./popover-CGZmNc4e.js";import"./index-DrCm3EO8.js";import"./Combination-DuTqoeZY.js";import"./index-CE35kS-Q.js";import"./index-C_ZzNLza.js";import"./index-BkNWx6m2.js";import"./index-DE01g13U.js";import"./index--K3sZeIh.js";import"./user-DUzEMHwr.js";import"./index-FHuIi1st.js";import"./select-B3i9CjeT.js";import"./index-DqWbzM0E.js";import"./categoriesAPI-DvU_otkD.js";import"./search-DlKIh_Ll.js";import"./database-BKbjrLJf.js";import"./scroll-area-BfHT7kH_.js";import"./useMutation-CApHjpg4.js";import"./arrow-up-BRrXiPPU.js";import"./dialog-D1sIsNKu.js";import"./circle-plus-gGTkOUJD.js";import"./house-Qr62Kw0A.js";import"./shield-x-BsKCYJAg.js";import"./video-CY1c3mCS.js";import"./plus-DTTTuzsk.js";import"./square-pen-D72gPhkm.js";import"./trash-2-DHce8VXy.js";import"./triangle-alert-Btc8UJ8c.js";const xe=()=>{const{id:v}=w(),[o,f]=i.useState({days:0,hours:0,minutes:0,seconds:0}),[y,j]=i.useState(!1),[d,x]=i.useState([]),[b,p]=i.useState(!0),[a,h]=i.useState(null);if(i.useEffect(()=>{(async()=>{try{p(!0),console.log("🔍 Chargement des produits de vente flash depuis l'API");const n=(await D.getBanniereProducts()).data;if(console.log("📦 Produits de vente flash récupérés via API:",n),!n||n.length===0){console.log("❌ Aucun produit dans la réponse API"),x([]),h(null),p(!1);return}const s=n[0];h({title:s.flashSaleTitle||"Vente Flash",description:s.flashSaleDescription||"Profitez de nos offres exceptionnelles !",discount:s.flashSaleDiscount||0,startDate:s.flashSaleStartDate||"",endDate:s.flashSaleEndDate||""});const u=n.map(l=>({...l,price:l.flashSalePrice||l.price,originalPrice:l.originalFlashPrice||l.originalPrice||l.price}));x(u)}catch(r){console.error("💥 Erreur lors du chargement des produits de vente flash via API:",r),x([]),h(null)}finally{p(!1)}})()},[v]),i.useEffect(()=>{if(!a||!a.endDate)return;const t=()=>{const s=new Date(a.endDate).getTime()-new Date().getTime();if(s>0){const u=Math.floor(s/864e5),l=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),S=Math.floor(s%(1e3*60*60)/(1e3*60)),P=Math.floor(s%(1e3*60)/1e3);f({days:u,hours:l,minutes:S,seconds:P}),j(!1)}else f({days:0,hours:0,minutes:0,seconds:0}),j(!0)};t();const r=setInterval(t,1e3);return()=>clearInterval(r)},[a]),b)return e.jsx(c,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-red-600 mx-auto mb-6"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Chargement de la vente flash..."})]})})});if(!a||d.length===0)return e.jsx(c,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx(g,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Aucune vente flash active"}),e.jsx("p",{className:"text-gray-600",children:"Il n'y a actuellement aucune vente flash disponible."})]})})});if(y)return e.jsx(c,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx(F,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Vente flash expirée"}),e.jsx("p",{className:"text-gray-600",children:"Cette vente flash est terminée."})]})})});const N=[{label:"Jours",value:o.days},{label:"Heures",value:o.hours},{label:"Min",value:o.minutes},{label:"Sec",value:o.seconds}];return e.jsx(c,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-red-600 via-pink-600 to-orange-600 text-white rounded-lg p-8 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(g,{className:"h-8 w-8 text-yellow-300 animate-pulse"}),e.jsx("h1",{className:"text-3xl font-bold",children:a.title}),e.jsxs("span",{className:"bg-yellow-400 text-black px-4 py-2 rounded-full text-lg font-bold",children:["-",a.discount,"%"]})]}),e.jsx("p",{className:"text-xl mb-6 opacity-90",children:a.description}),e.jsxs("div",{className:"flex justify-center items-center space-x-2 mb-4",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{className:"text-lg font-medium",children:"Se termine dans:"})]}),e.jsx("div",{className:"flex justify-center space-x-4",children:N.map((t,r)=>e.jsxs(m.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:r*.1},className:"text-center",children:[e.jsx(m.div,{initial:{rotateX:-90},animate:{rotateX:0},transition:{duration:.3},className:"bg-black/30 backdrop-blur rounded-lg px-4 py-3 min-w-[70px] mb-2",children:e.jsx("div",{className:"text-2xl font-bold",children:t.value.toString().padStart(2,"0")})},t.value),e.jsx("div",{className:"text-sm opacity-80",children:t.label})]},t.label))})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Produits en vente flash : ",e.jsx("span",{className:"text-red-800 font-bold",children:d.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:d.map(t=>e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsx(I,{product:{...t,promotion:t.flashSaleDiscount||t.promotion}})},t.id))})]})]})})};export{xe as default};
