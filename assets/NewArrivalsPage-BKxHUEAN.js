import{j as e,B as d,p as A,J}from"./index-Dc-BS1W2.js";import{r as o}from"./emoji-mart-DRerY-OB.js";import{L as z}from"./Layout-TSHxcvNT.js";import{P as G}from"./ProductGrid-JVyDvg9G.js";import{u as M,H as U,P as _,F as q,D as K}from"./useProductFilters-DBbhcKgy.js";import{T as Q,d as V}from"./pubLayoutAPI-DfYluJku.js";import{C as W}from"./user-DUzEMHwr.js";import{S as X}from"./index-DrCm3EO8.js";import"./badge-taJbTjbb.js";import"./popover-CGZmNc4e.js";import"./Combination-DuTqoeZY.js";import"./index-CE35kS-Q.js";import"./index-C_ZzNLza.js";import"./index-BkNWx6m2.js";import"./index-DE01g13U.js";import"./index--K3sZeIh.js";import"./index-FHuIi1st.js";import"./select-B3i9CjeT.js";import"./index-DqWbzM0E.js";import"./categoriesAPI-DvU_otkD.js";import"./search-DlKIh_Ll.js";import"./clock-U9VSJiyP.js";import"./database-BKbjrLJf.js";import"./scroll-area-BfHT7kH_.js";import"./useMutation-CApHjpg4.js";import"./arrow-up-BRrXiPPU.js";import"./ProductCard-Cq7PI4fG.js";import"./dialog-D1sIsNKu.js";import"./circle-plus-gGTkOUJD.js";import"./play-C68uu85c.js";import"./house-Qr62Kw0A.js";import"./shield-x-BsKCYJAg.js";import"./video-CY1c3mCS.js";import"./plus-DTTTuzsk.js";import"./square-pen-D72gPhkm.js";import"./trash-2-DHce8VXy.js";import"./triangle-alert-Btc8UJ8c.js";const Te=()=>{const[S,n]=o.useState([]),[k,m]=o.useState(!0),[F,B]=o.useState(!1),[s,u]=o.useState(1),c=16,{searchTerm:p,setSearchTerm:g,priceRange:x,setPriceRange:h,maxPrice:v,sortOption:C,setSortOption:D,sortedProducts:a,showInStock:f,setShowInStock:j,showOutOfStock:b,setShowOutOfStock:N,activeFilters:O,resetFilters:i,getFilterBadges:I}=M({products:S});o.useEffect(()=>{(async()=>{m(!0);try{try{const r=await A.getNewArrivals();if(r.data&&Array.isArray(r.data)){n(r.data);return}}catch{console.log("API nouveautés non disponible, fallback sur tous les produits")}const t=await A.getAll();if(!t.data||!Array.isArray(t.data))throw new Error("Format de données incorrect");const E=[...t.data].sort((r,P)=>{const H=r.dateAjout?new Date(r.dateAjout).getTime():0;return(P.dateAjout?new Date(P.dateAjout).getTime():0)-H}).slice(0,50);n(E)}catch(t){console.error("Erreur lors du chargement des nouveautés:",t),J.error("Impossible de charger les nouveautés"),n([])}finally{m(!1)}})()},[]);const l=Math.ceil(a.length/c),w=(s-1)*c,L=w+c,y=a.slice(w,L),R={filtersOpen:F,setFiltersOpen:B,activeFilters:O,searchTerm:p,setSearchTerm:g,priceRange:x,setPriceRange:h,maxPrice:v,showInStock:f,setShowInStock:j,showOutOfStock:b,setShowOutOfStock:N,resetFilters:i};return e.jsx(z,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 via-white to-neutral-50 dark:from-neutral-950 dark:via-neutral-900 dark:to-neutral-950",children:[e.jsx(U,{title:"Dernières Nouveautés",description:"Découvrez nos dernières nouveautés en beauté capillaire. Les produits les plus récents pour sublimer votre style avec les dernières tendances.",icon:Q}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(_,{title:"Dernières nouveautés",productCount:a.length,sortOption:C,setSortOption:D,mobileFiltersProps:R}),e.jsx(q,{badges:I(),onClearAll:i}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsx(K,{searchTerm:p,setSearchTerm:g,priceRange:x,setPriceRange:h,maxPrice:v,showInStock:f,setShowInStock:j,showOutOfStock:b,setShowOutOfStock:N,resetFilters:i}),e.jsx("div",{className:"md:col-span-3",children:k?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(16)].map((T,t)=>e.jsxs("div",{className:"border rounded-xl p-4 h-[300px] animate-pulse",children:[e.jsx("div",{className:"w-full h-40 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},t))}):y.length>0?e.jsxs(e.Fragment,{children:[e.jsx(G,{products:y}),l>1&&e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",s," sur ",l," - ",a.length," produit",a.length>1?"s":""," au total"]}),e.jsxs("div",{className:"flex gap-2",children:[s>1&&e.jsxs(d,{variant:"outline",onClick:()=>u(s-1),className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Précédent"]}),s<l&&e.jsxs(d,{onClick:()=>u(s+1),className:"flex items-center gap-2",children:["Suivant",e.jsx(W,{className:"h-4 w-4"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 bg-neutral-50 dark:bg-neutral-900 rounded-xl text-center",children:[e.jsx(X,{className:"h-14 w-14 text-neutral-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucune nouveauté trouvée"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Nous n'avons trouvé aucune nouveauté correspondant à vos critères de recherche."}),e.jsx(d,{onClick:i,children:"Réinitialiser tous les filtres"})]})})]})]})]})})};export{Te as default};
